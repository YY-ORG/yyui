<h1 class="content-title">考核初评</h1>
<div *ngIf="!selectGroup" class="first-comment-paper">
    <table class="slds-table mgt30">
      <tr>
        <th>考题组</th>
        <th>考题总数</th>
        <th>已做总数</th>
        <th>未做总数</th>
        <th>初评总数</th>
        <th>操作</th>
      </tr>
      <tr *ngFor="let groupAnswer of groupAnswerItemList; let i = index">
        <td>{{groupAnswer.groupName}}</td>
        <td>{{groupAnswer.totalCount}}</td>
        <td>{{groupAnswer.doneCount}}</td>
        <td>{{groupAnswer.unstartedCount}}</td>
        <td>{{groupAnswer.markedCount}}</td>
        <td  *ngIf="paperStatus != 0"><font class="color-red" (click)="continueAnswer(groupAnswer)">查看试卷</font></td>
      </tr>
    </table>
    <pagination *ngIf="maxPage>1" [maxSize]="maxPage" [currentPage]="currentPage + 1" (pageChanged)="pageChanged($event)"></pagination>
</div>

<p class="mgt20"></p> 
<wizard *ngIf="!!assesslist?.length">
  <wizard-step stepTitle="{{assess.assessName}}" class="step-box" *ngFor="let assess of assesslist | orderBy: 'seqNo'; let a = index;" #wizard>
      <ng-container *ngIf='currentStep === a' [ngSwitch]="examination?.type">

          <ng-container *ngSwitchCase="0">
              <!-- 表单模板 -->
              <examination-assess-component 
                code="FORM" 
                *ngIf="!complexTemplateList?.length" 
                #examinationAssess 
                [templateFormId]="curremtTemplateForm?.id"
                [assessPaper]='currentAssessPaper'
                [assess]='currentAssesst'
                [group]='selectGroup'
                [userId]='userid'
                [globalDisable]='true'
                [templateItemItemList]="templateItemItemList"></examination-assess-component>
              <!-- 表格表单混合模板 -->
              <examination-assess-component 
                code="FORM_TABLE" 
                *ngIf="complexTemplateList.length" 
                #examinationAssess 
                [tableAssessList]="complexTemplateList" 
                [tableList]="complexTemplateList" 
                [templateFormId]="formTableFormTemplateId"
                [assessPaper]='currentAssessPaper'
                [assess]='currentAssesst'
                [group]='selectGroup'
                [userId]='userid'
                [globalDisable]='true'
                [templateItemItemList]="templateTableList"></examination-assess-component>
          </ng-container>
          <!-- 表格模板 -->

          <ng-container *ngSwitchCase="3">
            <examination-assess-component 
              code="TABLE" #examinationAssess 
              [tableAssessList]="templateItemItemList" 
              [tableList]="tableList" 
              [templateFormId]="curremtTemplateForm?.id"
              [assessPaper]='currentAssessPaper'
              [assess]='currentAssesst'
              [group]='selectGroup'
              [userId]='userid'
              [globalDisable]='true'
              [templateItemItemList]="tableItemList"></examination-assess-component>
          </ng-container>
      </ng-container>
    <div class="step-button-box">
      <button type="button" nglButton="inverse" *ngIf="a !== 0" (click)="confirmGoToStep(a - 1)">上一题</button>
      <button type="button" nglButton="inverse" *ngIf="a + 1 !== assesslist.length" (click)="(paperStatus != 0 || currentDisable) ? goToStep(a + 1) : confirmGoToStep(a + 1)" class="mgr30">下一题</button>
      <button type="button" nglButton="inverse" *ngIf="a + 1 === assesslist.length" (click)="goToIndex()" class="mgr30">返回首页</button>
      
      <button *ngIf='!(paperStatus != 0 || currentDisable)' type="button" nglButton="brand" (click)="nextSteap(a + 1)">保存</button>
    </div>
  </wizard-step>
</wizard>
<alert #alert></alert>
<confirm (onConfirm)="onConfirm()" #confirm></confirm>
<spinner #spinner></spinner>
